
# npm-scripts

Varios automation scripts, mostly to be used with npm as `npm run ...`.
All references to `scripts.*` below mean scripts section in `package.json`


## `ten-x-release`

Ceates and publishes new package version. Should be added to `scripts.release` and ran as `npm run release [-- options]`.
Run with `-h` to see available options

```
Publishing script. Automates following steps:

  - check environment setup
  - assemple a change log from from git history
  - bump the package version and tag it
  - push to remote git repository
  - publish to npm registry

Usage

  release.js [options]

Options

  --debug           Show shell commands debugging

  --dry             Do not run git commit/puash, do not write package.json,
                    npm build would be still ran as normal

  --changelog       Define how to assemble changelog from git history. Values:

                    markers:MARKER1,...,MARKERN

                      Default, bilt-in, matchs through entire commit description
                      collecting the lines starting with listed markers.
                      By default markers:FEATURE,FIX,DEV

                    raw

                      Built-in, collects all commit subjects (git log --pretty=format:%s)

                    *

                      Custom node module path to be require()'d and provide
                      function returning lines array

  --changefile      Changelog file name in CWD.
                    By default CHANGELOG.md

  --from            Current package version before bumped,
                    start point for reading git log

  --no-master       Do not require to publish only from master branch

  --no-build        Skip the build step, skipping by default if there is no
                    scripts.build defined in package.json

  --[no-]push       Enforce all changes [not] to be pushed to default remote git repo,
                    user will be prompted if omitted

  --[no-]publish    Enforce package to [not] be pushed to npm registry,
                    user will be prompted if omitted
```


## `ten-x-commit`

Should be added to `scripts.commit`. Then run `echo 'npm run commit' > .git/hooks/commit-msg` to setup Git hook.

On git commit script will try to extract Jira ticket number from branch name and
prepend it to original commit message if there is no one.

# Release

100% dogfooding :) `npm release -- --changelog=raw`
